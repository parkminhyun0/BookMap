<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë„ì„œ ë“±ë¡</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
  <div class="container py-5">
    <h2 class="mb-4">ğŸ“š ë„ì„œ ë“±ë¡</h2>
    <form id="bookForm" class="card p-4 shadow-sm bg-white">

      <div class="mb-3">
        <label class="form-label">ë„ì„œ ì œëª©</label>
        <input type="text" class="form-control" name="title" required>
      </div>

      <div class="mb-3">
        <label class="form-label">ì €ì</label>
        <input type="text" class="form-control" name="author" required>
      </div>

      <div class="mb-3">
        <label class="form-label">ë¶„ë¥˜ (ì¹´í…Œê³ ë¦¬)</label>
        <input type="text" class="form-control" name="category" placeholder="ì˜ˆ: ìê¸°ê³„ë°œ, ê²½ì˜, ì‹¬ë¦¬">
        <small class="form-text text-muted">
          ì—¬ëŸ¬ ê°œ ì…ë ¥ ì‹œ <strong>ì‰¼í‘œ(,)</strong>ë¡œ êµ¬ë¶„í•´ì£¼ì„¸ìš”.  
          ì˜ˆ: <code>ìê¸°ê³„ë°œ, ê²½ì˜, ì‹¬ë¦¬</code>
        </small>
      </div>

      <div class="mb-3">
        <label class="form-label">ë‚œì´ë„</label>
        <select class="form-select" name="level" required>
          <option value="">ì„ íƒ</option>
          <option>ì…ë¬¸</option>
          <option>ì´ˆê¸‰</option>
          <option>ì¤‘ê¸‰</option>
          <option>ê³ ê¸‰</option>
          <option>ì „ë¬¸</option>
        </select>
      </div>

      <div class="mb-3">
        <label class="form-label">ì¶”ì²œ ì‚¬ìœ </label>
        <textarea class="form-control" name="reason" rows="3"></textarea>
      </div>

      <div class="mb-3">
        <label class="form-label">êµ¬ë§¤/ì°¸ê³  ë§í¬</label>
        <input type="url" class="form-control" name="link" placeholder="http://...">
      </div>

      <div class="mb-3">
        <label class="form-label">í‘œì§€ ì´ë¯¸ì§€ URL</label>
        <input type="url" class="form-control" name="cover" placeholder="http://...">
      </div>

      <button type="submit" class="btn btn-primary">ë“±ë¡</button>
      <a href="index.html" class="btn btn-secondary">ë©”ì¸ìœ¼ë¡œ</a>
    </form>

    <div id="msg" class="mt-3"></div>
  </div>

  <script>
    const API_URL = "https://script.google.com/macros/s/AKfycbxFb7I_eFXm7nPtkcezalzNRSeJ3Pg5lPM6byRbiEHkF8pXVjReRC_kYKsVD0flABYrQw/exec";

    document.getElementById("bookForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const formData = new FormData(e.target);
      const entry = Object.fromEntries(formData.entries());

      const res = await fetch(API_URL, {
        method: "POST",
        body: JSON.stringify({ action: "submit", entry })
      });
      const data = await res.json();

      if (data.ok) {
        document.getElementById("msg").innerHTML =
          `<div class="alert alert-success">âœ… ë“±ë¡ ì™„ë£Œ! ê´€ë¦¬ìì˜ ìŠ¹ì¸ì„ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.</div>`;
        e.target.reset();
      } else {
        document.getElementById("msg").innerHTML =
          `<div class="alert alert-danger">âŒ ë“±ë¡ ì‹¤íŒ¨: ${data.error || "ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜"}</div>`;
      }
    });
  </script>
</body>
</html>
